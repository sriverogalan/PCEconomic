<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="layout/layout :: head"></head>
    <body>
        <header th:replace="layout/layout :: navbar"></header>
        <main>
            <section id="articles"></section>
        </main>
        <div th:replace="layout/layout.html :: jquery"></div>
        <script>
            $.ajax({
                url: "/api/carrito",
                type: "GET",
                dataType: "json",
                beforeSend: function () {
                    $("#loading-wheel").show();
                },
                complete: function () {
                    $("#loading-wheel").hide();
                },
                success: function (carrito) {
                    $.ajax({
                        url: "/api/articles",
                        type: "GET",
                        dataType: "json",
                        beforeSend: function () {
                            $("#loading-wheel").show();
                        },
                        complete: function () {
                            $("#loading-wheel").hide();
                        },
                        success: function (articles) {
                            for (var c of carrito.ids) {
                                for (var a of articles) {
                                    if (c.idprops === a.propietats.id && a.principal === true) {
                                        $("#articles").append(
                                            '<p>' + a.propietats.article.nom +'</p>' +
                                            '<p>' + c.quantity +'</p>' +
                                            '<input  />'
                                        )
                                    }
                                }
                            }
                        }
                    });
                }
            });
        </script>
        <footer th:replace="layout/layout.html :: footer"></footer>
    </body>
</html>